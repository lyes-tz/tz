var thistitle=document.title;if("504 Gateway Time-out"==thistitle||"403 Forbidden"==thistitle||"502 Bad Gateway"==thistitle||"503 Service Temporarily Unavailable"==thistitle)console.log(thistitle+" - Actualisation ..."),setTimeout(function(){location.reload()},5e3);else if($("#pwt00").length||document.body.insertAdjacentHTML("beforeend","<div id='pwt00' style='position:fixed;z-index:20000;bottom:0;right:0;background-color:#000;color:#FFF;padding:10px;font-size:16px;font-family: Arial, Helvetica, sans-serif;text-align:center;'>Alert addon</div>"),localStorage.getItem("busermail")){function basename(e){return e.split("/").reverse()[0]}function getfirstfolder(e){var t=window.location.pathname.split("/");return!!t[2]&&t[1]}function getSubdomain(e){var t=new RegExp("[a-z-0-9]{2,63}.[a-z.]{2,5}$").exec(e);return e.replace(t[0],"").slice(0,-1)}var thisfullurl=location.pathname;if(0!=getfirstfolder(window.location.hostname))var countrywebsite=getfirstfolder(window.location.hostname);else countrywebsite=getSubdomain(window.location.hostname);if($("body").find("input[readonly='']").prop("readonly",!1),"book_appointment.php"==basename(thisfullurl)&&"algeria"==countrywebsite){function savepwgdata(){localStorage.setItem("spwgemail",$("#pwgemail").val()),localStorage.setItem("spwgphone",$("#pwgphone").val()),localStorage.setItem("spwgjurid",$("#pwgjurid").val())}var vpwgemail="",vpwgphone="",vpwgjurid="";function checkTime(e){return e<10&&(e="0"+e),e}function gettimenow(){var e=new Date,t=e.getDate(),o=(new Array("January","February","March","April","May","June","July","August","September","October","November","December")[e.getMonth()],e.getHours()),a=e.getMinutes();return t=checkTime(t),(o=checkTime(o))+":"+(a=checkTime(a))}localStorage.getItem("spwgemail")&&(vpwgemail=localStorage.getItem("spwgemail"),vpwgphone=localStorage.getItem("spwgphone"),vpwgjurid=localStorage.getItem("spwgjurid")),document.body.insertAdjacentHTML("beforeend",'<div id="pwgdatadiv" style="display:none;width:300px;position:fixed;background-color:#000;color:#FFF;font-size:16px;z-index:30000;bottom:0;"><div style="width:100%;border:1px solid #FFF;"><div style="float:left;width:118px;padding:15px;padding-right:0;">Email :</div><div style="padding:10px;"><input id="pwgemail" type="text" style="width:160px;margin:0;padding:5px;" class="form-control-input" value="'+vpwgemail+'" onchange="savepwgdata();" /></div></div><div style="width:100%;border:1px solid #FFF;"><div style="float:left;width:118px;padding:15px;padding-right:0;">Phone : 213</div><div style="padding:10px;"><input id="pwgphone" type="text" style="width:160px;margin:0;padding:5px;" class="form-control-input" value="'+vpwgphone+'" onchange="savepwgdata();" /></div></div><div style="width:100%;border:1px solid #FFF;"><div style="float:left;width:118px;padding:15px;padding-right:0;">Juridiction</div><div style="padding:10px;"><select id="pwgjurid" name="pwgjurid" class="form-control-input" style="width:160px;margin:0;padding:5px;" onchange="savepwgdata();"><option value="15#Algiers#10">Alger</option><option value="14#Oran#9">Oran</option></select></div></div></div>'),""!=vpwgjurid&&$('#pwgjurid option[value="'+vpwgjurid+'"]').prop("selected",!0),$(".marginBottomNone").length&&$(".marginBottomNone").removeClass("marginBottomNone");var alarmnoise="https://www.prowebgen.com/noise-bls.mp3",alarmnoise_open="https://www.prowebgen.com/noise-bls-open.mp3";if($("#IDBodyPanelapp").length&&$("#IDBodyPanelapp,.popupBG-app").css({display:"none"}),$(".row.padding-sm.alignCenter.red.whiteBG.marginBottom").css({display:"none"}),$(".headerSection").length&&$(".headerSection").css({display:"none"}),document.getElementById("captcha-img")&&$("#captcha-img").css({width:"400",height:"140"}),$("header").length&&$("header").css({display:"none"}),$(".innerbodypanel").length&&$(".innerbodypanel").css({margin:"0","min-height":"0"}),$(".aboutUsPanel").length&&$(".aboutUsPanel").css({padding:"0"}),$("#Booking").length&&$("#Booking").prevAll().eq(1).css({display:"none"}),$("#Booking").length&&$("#Booking").prev().css({display:"none"}),$("h1").length&&$("h1").css({display:"none"}),$(".paddingupdwn,.aboutBG,.footerSection").length&&$(".paddingupdwn,.aboutBG,.footerSection").css({display:"none"}),$(".paddingInBoxExtra").length&&$(".paddingInBoxExtra").css({padding:"10px","margin-top":"7px"}),$("#overlay").length&&$("#overlay").css({display:"none"}),$("#mySidenav").length&&$("#mySidenav").remove(),document.getElementById("terms")&&(document.getElementById("terms").checked="true"),document.getElementsByName("agree")[0]&&document.getElementsByName("agree")[0].click(),$(".notification")&&"Appointment dates are not available."==$(".notification").eq(0).html()){$("#pwgdatadiv").show();var cdsec=8;function displaycountdown(){cdsec-=1,$("#pwt00").html("BLS en pause - "+cdsec+" s"),cdsec>0?setTimeout(function(){displaycountdown()},1e3):location.reload()}displaycountdown(),localStorage.setItem("blsopensent","0")}else if($(".notification")&&"Booking available between 9 AM to 9 PM."==$(".notification").eq(0).html())$("#pwgdatadiv").show(),$("#pwt00").html("BLS en mode nuit"),localStorage.setItem("blsopensent","0");else{function saveblsdata(){localStorage.setItem("spwgemail",$("#email").val()),localStorage.setItem("spwgphone",$("#phone").val()),localStorage.setItem("spwgjurid",$("#juridiction").val())}function opensitesendemailalertit(){0==localStorage.getItem("blsopensent")&&(new Audio(alarmnoise_open).play(),"algeria"==countrywebsite&&$.ajax({url:"https://www.prowebgen.com/bmailer.php?op=1&um="+localStorage.getItem("busermail")+"&ctry="+countrywebsite,complete:function(e){200==e.status?"mailerror"==e.responseText?$("#pwt00").html("Email non autorisÃ©"):"error"==e.responseText?($("#pwt00").html("Erreur Email, Renvoi ..."),opensitesendemailalertit()):"good"==e.responseText&&($("#pwt00").html(gettimenow()+" - SITE OUVERT, Email envoyÃ©"),localStorage.setItem("blsopensent","1")):($("#pwt00").html("Erreur rÃ©seau, Renvoi ..."),opensitesendemailalertit())}}))}$("#email").change(function(){saveblsdata()}),$("#phone").change(function(){saveblsdata()}),$("#juridiction").change(function(){saveblsdata()}),null==localStorage.getItem("blsopensent")&&localStorage.setItem("blsopensent","0"),localStorage.getItem("spwgemail")&&$("#email").val(localStorage.getItem("spwgemail")),localStorage.getItem("spwgphone")&&$("#phone").val(localStorage.getItem("spwgphone")),localStorage.getItem("spwgjurid")&&$('#juridiction option[value="'+localStorage.getItem("spwgjurid")+'"]').prop("selected",!0),opensitesendemailalertit();var datesavailable=0,newtokencode="",CSRFNamevar="",CSRFTokenvar="";$("#csrftokenvalue").val()&&(newtokencode=$("#csrftokenvalue").val()),$("input[name=CSRFName]").val()&&(CSRFNamevar=$("input[name=CSRFName]").val()),$("input[name=CSRFToken]").val()&&(CSRFTokenvar=$("input[name=CSRFToken]").val());var resettokencode=1;function smscheckotp(){if(32==newtokencode.length)sendOTP();else{var e="0";""==$("#phone_code").val()?($("#pwt00").html("Erreur code tÃ©lÃ©phone"),$("#phone_code").addClass("error"),e="1"):$("#phone_code").removeClass("error"),9!=$("#phone").val().length?($("#pwt00").html("Erreur tÃ©lÃ©phone"),$("#phone").addClass("error"),e="1"):$("#phone").removeClass("error"),""==$("#email").val()?($("#pwt00").html("Erreur Email"),$("#email").addClass("error"),e="1"):$("#email").removeClass("error"),""==$("#juridiction").val()?($("#pwt00").html("Erreur juridiction"),$("#juridiction").addClass("error"),e="1"):$("#juridiction").removeClass("error"),"0"==e&&($("#pwt00").html("Actualisation ..."),$.ajax({type:"GET",url:"book_appointment.php",complete:function(e){if(200==e.status){var t=e.responseText;if(""==t.trim())$("#pwt00").html("Aucune donnÃ©e, RÃ©actualisation ..."),setTimeout(function(){smscheckotp()},5e3);else{var o=t.split('csrftokenvalue" value="');if(o[1])if(newtokencode=o[1].substr(0,32),"algeria"==countrywebsite){var a=t.split("CSRFGuard_");if(a[1]){var n="CSRFGuard_"+a[1].split("'")[0];$("input[name=CSRFName]").val(n),CSRFNamevar=n;var i=t.split("name='CSRFToken' value='")[1].split("'");$("input[name=CSRFToken]").val(i[0]),CSRFTokenvar=i[0],32==newtokencode.length?($("#csrftokenvalue").val(newtokencode),sendOTP()):($("#pwt00").html("Erreur Token, RÃ©actualisation ..."),setTimeout(function(){smscheckotp()},5e3))}}else 32==newtokencode.length?($("#csrftokenvalue").val(newtokencode),sendOTP()):($("#pwt00").html("Erreur Token, RÃ©actualisation ..."),setTimeout(function(){smscheckotp()},5e3));else $("#pwt00").html("Pas de Token, RÃ©actualisation ..."),setTimeout(function(){smscheckotp()},5e3)}}else $("#pwt00").html("Echec requÃªte, Renvoi ..."),setTimeout(function(){smscheckotp()},5e3)}}))}}function sendemailalertit(){if(new Audio(alarmnoise).play(),"algeria"==countrywebsite){var e=$("#juridiction").val().split("#")[2];$.ajax({url:"https://www.prowebgen.com/bmailer.php?um="+localStorage.getItem("busermail")+"&ctry="+countrywebsite+"&city="+e,complete:function(e){200==e.status?"mailerror"==e.responseText?$("#pwt00").html("Email non autorisÃ©"):"error"==e.responseText?($("#pwt00").html("Erreur Email, Renvoi ..."),sendemailalertit()):"good"==e.responseText&&$("#pwt00").html(gettimenow()+" - DISPO, Email envoyÃ©"):($("#pwt00").html("Erreur rÃ©seau, Renvoi ..."),sendemailalertit())}})}}function sendOTP(){if(0!=newtokencode.length){var e="send_mail_for_vac";"algeria"==countrywebsite&&(e="send_mail");var t="0";if(""==$("#phone_code").val()?($("#pwt00").html("Erreur code tÃ©lÃ©phone"),$("#phone_code").addClass("error"),t="1"):$("#phone_code").removeClass("error"),9!=$("#phone").val().length?($("#pwt00").html("Erreur tÃ©lÃ©phone"),$("#phone").addClass("error"),t="1"):$("#phone").removeClass("error"),""==$("#email").val()?($("#pwt00").html("Erreur Email"),$("#email").addClass("error"),t="1"):$("#email").removeClass("error"),"algeria"==countrywebsite)if(""==$("#juridiction").val())$("#pwt00").html("Erreur juridiction"),$("#juridiction").addClass("error"),t="1";else{$("#juridiction").removeClass("error");var o=$("#juridiction").val().split("#")[2]}else if(""==$("#centre").val())$("#pwt00").html("Erreur centre"),$("#juridiction").addClass("error"),t="1";else{$("#centre").removeClass("error");o=$("#centre").val().split("#")[1]}"0"==t&&($("#pwt00").html("VÃ©rification ..."),$.ajax({type:"POST",data:"gofor="+e+"&email="+$("#email").val()+"&phone_code="+$("#phone_code").val()+"&phone_no="+$("#phone").val()+"&center_id="+o+"&visa=&token="+newtokencode+"&CSRFName="+CSRFNamevar+"&CSRFToken="+CSRFTokenvar,url:"ajax.php",complete:function(e){if(200==e.status){var t=e.responseText;"full"==t.trim()?($("#pwt00").html(gettimenow()+" - Aucune date"),$("#otplauncher").prop("disabled",!0)):"fail"==t.trim()?$("#pwt00").html(gettimenow()+" - TÃ©lÃ©phone dÃ©jÃ  utilisÃ©"):"error"==t.trim()?$("#pwt00").html(gettimenow()+" - VÃ©rifiez numÃ©ro de tÃ©lÃ©phone"):"Access Not allowed"==t.trim()?$("#pwt00").html(gettimenow()+" - AccÃ¨s non autorisÃ©"):"CSRF Token validation Failed"==t.trim()?$("#pwt00").html(gettimenow()+" - Echec rÃ©cupÃ©ration Token"):"pass"==t.trim()||"same"==t.trim()?($("#pwt00").html(gettimenow()+" - Dates dispo - "+t.trim()),resettokencode=0,datesavailable=1,sendemailalertit()):$("#pwt00").html(gettimenow()+" - Echec Authentication"),0==datesavailable&&setTimeout(function(){sendOTP()},1e4),1==resettokencode&&(newtokencode="")}else $("#pwt00").html(gettimenow()+" - "+e.status),setTimeout(function(){sendOTP()},5e3)}}))}else smscheckotp()}$("abbr").html("<div style='margin-bottom:10px;'><a href='javascript:;' onClick='smscheckotp();'><input id='otplauncher' type='button' value='Lancer OTP code Sender' class='btn primary-btn row' style='padding:10px;min-width:200px;margin:0;' /></a></div>"),"algeria"==countrywebsite&&setTimeout(function(){$("#otplauncher").click()},1e3)}}else $("#pwt00").html("Page non valide")}else $("#pwt00").html("Email non dÃ©fini");
